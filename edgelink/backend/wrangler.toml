name = "edgelink-production"
main = "src/index.ts"
compatibility_date = "2024-11-07"
workers_dev = true

# KV Namespace for link storage (fast redirects)
[[kv_namespaces]]
binding = "LINKS_KV"
id = "d343d816e5904857b49d35938c7f39cf"
preview_id = "46db878aed4b40b6b1dce78fab668170"

# D1 Database for user data and metadata
[[d1_databases]]
binding = "DB"
database_name = "edgelink-production"
database_id = "d5f676e0-b43f-4ac9-ab2c-acd1ddcda86b"

# Analytics Engine for click tracking (temporarily disabled - needs to be enabled in dashboard)
# [[analytics_engine_datasets]]
# binding = "ANALYTICS_ENGINE"

# R2 Bucket for file storage (exports, imports) (temporarily disabled - needs to be created)
# [[r2_buckets]]
# binding = "R2_BUCKET"
# bucket_name = "edgelink-storage"

# Environment variables
[vars]
ENVIRONMENT = "development"

# Secrets (set via: wrangler secret put <NAME>)
# JWT_SECRET - Secret key for JWT signing/verification
# Run: wrangler secret put JWT_SECRET

# Rate Limiting
[[unsafe.bindings]]
name = "RATE_LIMITER"
type = "ratelimit"
namespace_id = "1001"
simple = { limit = 1000, period = 86400 }
